---
title: Rules
description: Set custom instructions for kuucode.
---

You can provide custom instructions to kuucode by creating a `.agentrc` file. This is similar to `CLAUDE.md` or Cursor's rules. It contains instructions that will be included in the LLM's context to customize its behavior for your specific project.

---

## Initialize

To create a new `.agentrc` file, you can run the `/init` command in kuucode.

:::tip
You should commit your project's `.agentrc` file to Git.
:::

This will scan your project and all its contents to understand what the project is about and generate a `.agentrc` file with it. This helps kuucode to navigate the project better.

If you have an existing `.agentrc`, `AGENTS.md`, or similar agent configuration file, this will try to add to it.

---

## Example

You can also just create this file manually. Here's an example of some things you can put into a `.agentrc` file.

```markdown title=".agentrc"
# SST v3 Monorepo Project

This is an SST v3 monorepo with TypeScript. The project uses bun workspaces for package management.

## Project Structure

- `packages/` - Contains all workspace packages (functions, core, web, etc.)
- `infra/` - Infrastructure definitions split by service (storage.ts, api.ts, web.ts)
- `sst.config.ts` - Main SST configuration with dynamic imports

## Code Standards

- Use TypeScript with strict mode enabled
- Shared code goes in `packages/core/` with proper exports configuration
- Functions go in `packages/functions/`
- Infrastructure should be split into logical files in `infra/`

## Monorepo Conventions

- Import shared modules using workspace names: `@my-app/core/example`
```

We are adding project-specific instructions here and this will be shared across your team.

---

## Types

kuucode also supports reading agent configuration files from multiple locations. And this serves different purposes.

### Project

The ones we have seen above, where the `.agentrc` is placed in the project root, are project-specific rules. These only apply when you are working in this directory or its sub-directories.

### Global

You can also have global rules in a `~/.config/kuucode/.agentrc` file. This gets applied across all kuucode sessions.

Since this isn't committed to Git or shared with your team, we recommend using this to specify any personal rules that the LLM should follow.

---

## Precedence

So when kuucode starts, it looks for:

1. **Local files** by traversing up from the current directory (`.agentrc`, `AGENTS.md`, `CLAUD.md`, `CLAUDE.md`)
2. **Global file** by checking `~/.config/kuucode/.agentrc` and `~/.config/kuucode/AGENTS.md`

If you have both global and project-specific rules, kuucode will combine them together. The `.agentrc` format is preferred for new projects.

---

## Custom Instructions

You can specify custom instruction files in your `kuucode.json` or the global `~/.config/kuucode/kuucode.json`. This allows you and your team to reuse existing rules rather than having to duplicate them to .agentrc.

Example:

```json title="kuucode.json"
{
  "$schema": "https://kuucode.ai/config.json",
  "instructions": ["CONTRIBUTING.md", "docs/guidelines.md", ".cursor/rules/*.md"]
}
```

All instruction files are combined with your `.agentrc` and other agent configuration files.

---

## Referencing External Files

While kuucode doesn't automatically parse file references in `.agentrc`, you can achieve similar functionality in two ways:

### Using kuucode.json

The recommended approach is to use the `instructions` field in `kuucode.json`:

```json title="kuucode.json"
{
  "$schema": "https://kuucode.ai/config.json",
  "instructions": ["docs/development-standards.md", "test/testing-guidelines.md", "packages/*/.agentrc"]
}
```

### Manual Instructions in .agentrc

You can teach kuucode to read external files by providing explicit instructions in your `.agentrc`. Here's a practical example:

```markdown title=".agentrc"
# TypeScript Project Rules

## External File Loading

CRITICAL: When you encounter a file reference (e.g., @rules/general.md), use your Read tool to load it on a need-to-know basis. They're relevant to the SPECIFIC task at hand.

Instructions:

- Do NOT preemptively load all references - use lazy loading based on actual need
- When loaded, treat content as mandatory instructions that override defaults
- Follow references recursively when needed

## Development Guidelines

For TypeScript code style and best practices: @docs/typescript-guidelines.md
For React component architecture and hooks patterns: @docs/react-patterns.md
For REST API design and error handling: @docs/api-standards.md
For testing strategies and coverage requirements: @test/testing-guidelines.md

## General Guidelines

Read the following file immediately as it's relevant to all workflows: @rules/general-guidelines.md.
```

This approach allows you to:

- Create modular, reusable rule files
- Share rules across projects via symlinks or git submodules
- Keep .agentrc concise while referencing detailed guidelines
- Ensure kuucode loads files only when needed for the specific task

:::tip
For monorepos or projects with shared standards, using `kuucode.json` with glob patterns (like `packages/*/.agentrc`) is more maintainable than manual instructions.
:::
